<?xml version="1.0" encoding="UTF-8"?>
<local:BasePage xmlns="http://xamarin.com/schemas/2014/forms" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" x:Class="PaketGlobal.AcceptPackagePage"
                xmlns:local="clr-namespace:PaketGlobal" xmlns:zxing="clr-namespace:ZXing.Net.Mobile.Forms;assembly=ZXing.Net.Mobile.Forms"
                xmlns:xlabs="clr-namespace:XLabs.Forms.Controls;assembly=XLabs.Forms">
    <local:BasePage.Resources>
        <ResourceDictionary>
            <local:PaketRoleToStringConverter x:Key="paketRoleToStringConverter" />
        </ResourceDictionary>
    </local:BasePage.Resources>
    <local:BasePage.Content>
        <RelativeLayout>
            <RelativeLayout x:Name="layoutBarcode"
                            RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent,Property=Width,Factor=1,Constant=0}"
                            RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent,Property=Height,Factor=1,Constant=0}">
                <zxing:ZXingScannerView x:Name="barcodeScaner" AutomationId="zxingScannerView"
                                        RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent,Property=Width,Factor=1,Constant=0}"
                                        RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent,Property=Height,Factor=1,Constant=0}"/>
                <zxing:ZXingDefaultOverlay x:Name="overlayBarcode" ShowFlashButton="false" TopText="Scan the barcode containing package information" BottomText="Scanning will happen automatically" AutomationId="zxingDefaultOverlay"
                                           RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent,Property=Width,Factor=1,Constant=0}"
                                           RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent,Property=Height,Factor=1,Constant=0}">
                    <zxing:ZXingDefaultOverlay.GestureRecognizers>
                        <TapGestureRecognizer
                                Tapped="ScannerOverlayTapped"/>
                    </zxing:ZXingDefaultOverlay.GestureRecognizers>
                </zxing:ZXingDefaultOverlay>
            </RelativeLayout>
            <RelativeLayout x:Name="layoutAccept" IsVisible="false"
                            RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent,Property=Width,Factor=1,Constant=0}"
                            RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent,Property=Height,Factor=1,Constant=0}">
                <TableView x:Name="contentPackage" HasUnevenRows="true" RowHeight="-1"
                           RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent,Property=Width,Factor=1,Constant=0}"
                           RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent,Property=Height,Factor=1,Constant=0}">
                    <TableRoot>
                        <TableSection Title="Information">
                            <ViewCell>
                                <StackLayout Orientation="Vertical" Padding="15,8,15,5" Spacing="0">
                                    <Label Text = "Role" FontSize="13" TextColor="#808080"/>
                                    <Label Text = "{Binding MyRole, Converter={StaticResource paketRoleToStringConverter}, Mode=OneWay}" FontSize="17" TextColor="#000000"/>
                                </StackLayout>
                            </ViewCell>
                            <ViewCell>
                                <StackLayout Orientation="Vertical" Padding="15,8,15,5" Spacing="0">
                                    <Label Text = "Status" FontSize="13" TextColor="#808080"/>
                                    <Label Text = "{Binding Status, Mode=OneWay}" FontSize="17" TextColor="#000000"/>
                                </StackLayout>
                            </ViewCell>
                            <ViewCell>
                                <StackLayout Orientation="Vertical" Padding="15,8,15,5" Spacing="0">
                                    <Label Text = "Deadline" FontSize="13" TextColor="#808080"/>
                                    <Label Text = "{Binding DeadlineDT, StringFormat='{0:MM.dd.yyyy}', Mode=OneWay}" FontSize="17" TextColor="#000000"/>
                                </StackLayout>
                            </ViewCell>
                            <ViewCell>
                                <StackLayout Orientation="Vertical" Padding="15,8,15,5" Spacing="0">
                                    <Label Text = "Launched" FontSize="13" TextColor="#808080"/>
                                    <Label Text = "{Binding SendTimeDT, StringFormat='{0:MM.dd.yyyy h:mm tt}', Mode=OneWay}" FontSize="17" TextColor="#000000"/>
                                </StackLayout>
                            </ViewCell>
                        </TableSection>
                        <TableSection Title="Funds">
                            <ViewCell>
                                <StackLayout Orientation="Vertical" Padding="15,8,15,5" Spacing="0">
                                    <Label Text = "Collateral" FontSize="13" TextColor="#808080"/>
                                    <Label Text = "{Binding FormattedCollateral, Mode=OneWay}" FontSize="17" TextColor="#000000"/>
                                </StackLayout>
                            </ViewCell>
                            <ViewCell>
                                <StackLayout Orientation="Vertical" Padding="15,8,15,5" Spacing="0">
                                    <Label Text = "Payment" FontSize="13" TextColor="#808080"/>
                                    <Label Text = "{Binding FormattedPayment, Mode=OneWay}" FontSize="17" TextColor="#000000"/>
                                    <xlabs:ExtendedButton x:Name="btnAccept" Margin="0,20,0,0" Text="Accept" HorizontalOptions="Center" TextColor="#ffffff" BackgroundColor="#7acd6a" Clicked="AcceptClicked"/>
                                </StackLayout>
                            </ViewCell>
                        </TableSection>
                    </TableRoot>
                </TableView>
            </RelativeLayout>
        </RelativeLayout>
    </local:BasePage.Content>
</local:BasePage>
