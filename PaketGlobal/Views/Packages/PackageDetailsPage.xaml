<?xml version="1.0" encoding="UTF-8"?>
<local:BasePage
    NavigationPage.HasNavigationBar="False"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="PaketGlobal.PackageDetailsPage"
    xmlns:xfg="clr-namespace:XFGloss;assembly=XFGloss"
    xmlns:local="clr-namespace:PaketGlobal"
    xmlns:xe="clr-namespace:XamEffects;assembly=XamEffects"
    xmlns:zxing="clr-namespace:ZXing.Net.Mobile.Forms;assembly=ZXing.Net.Mobile.Forms">

    <local:BasePage.Resources>
        <ResourceDictionary>
            <local:DeliveryStatusToStringConverter x:Key="deliveryStatusToStringConverter" />
            <local:DeliveryStatusToRefundVisibilityConverter x:Key="deliveryStatusToRefundVisibilityConverter" />
            <local:RefundStatusToReclaimVisibilityConverter x:Key="refundStatusToReclaimVisibilityConverter" />
            <local:PaketRoleToStringConverter x:Key="paketRoleToStringConverter" />
        </ResourceDictionary>
    </local:BasePage.Resources>

    
    <xfg:ContentPageGloss.BackgroundGradient>
        <xfg:Gradient Rotation="300">
            <xfg:GradientStep StepColor="#858fb4" StepPercentage="0" />
            <xfg:GradientStep StepColor="#2f3248" StepPercentage="1" />
        </xfg:Gradient>
    </xfg:ContentPageGloss.BackgroundGradient>


    
    <local:BasePage.Content>
        <RelativeLayout>
            <Label x:Name="TitleLabel" TextColor="White" Text="Package Details" XAlign="Center" FontFamily="{StaticResource SemiBoldFont}" FontSize="16"
                   RelativeLayout.YConstraint="30"
                   RelativeLayout.XConstraint="0"
                   RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}"/>
            <Button x:Name="BackButton" BackgroundColor="Transparent" Image="arrow_back_white.png"
                   Clicked="OnBack"
                   RelativeLayout.XConstraint = "23"
                   RelativeLayout.YConstraint = "{ConstraintExpression Type=RelativeToView, ElementName=TitleLabel, Property=Y, Factor=1, Constant=12}"></Button>
            <Frame x:Name="PakagesView" BackgroundColor="White" 
                      VerticalOptions="FillAndExpand"
                      HorizontalOptions="FillAndExpand"
                      Padding="0"
                      CornerRadius="18"
                      HasShadow="false"
                      RelativeLayout.XConstraint = "0"
                      RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height, Factor=1, Constant=0}"
                      RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}"
                      RelativeLayout.YConstraint = "{ConstraintExpression Type=RelativeToView, ElementName=BackButton, Property=Y, Factor=1, Constant=60}">
                <RelativeLayout>
                   <ScrollView BackgroundColor="Transparent" 
                                HorizontalScrollBarVisibility="Never" VerticalScrollBarVisibility="Never"
                                      RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}"
                                      RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height, Factor=1, Constant=-90}">

                        <StackLayout x:Name="Main" Spacing="20">

                     <StackLayout x:Name="InfoVew" BackgroundColor="Transparent">
                            <RelativeLayout>
                                <StackLayout Spacing="15" Orientation="Horizontal" RelativeLayout.XConstraint="17" RelativeLayout.YConstraint="15">
                                    <Image Source="{Binding StatusIconWithText, Mode=OneWay}" HorizontalOptions="Start" VerticalOptions="Start"/>
                                </StackLayout>
                                <local:PaketProgress Progress="{Binding Progress, Mode=OneWay}" 
                                             RelativeLayout.XConstraint="20" 
                                             RelativeLayout.YConstraint="55"
                                             RelativeLayout.HeightConstraint="1"
                                             RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=0.87}"/>
                                <Image Source="point_0.png" HorizontalOptions="Start"
                                       RelativeLayout.XConstraint="15" RelativeLayout.YConstraint="49"/>
                                <Image Source="{Binding ProgressIcon, Mode=OneWay}" HorizontalOptions="Start"
                                       RelativeLayout.XConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=0.91}"
                                       RelativeLayout.YConstraint="49"/>
                                <StackLayout Orientation="Horizontal" RelativeLayout.XConstraint="18" RelativeLayout.YConstraint="73"
                                             RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=0.9}">
                                    <StackLayout Spacing="0" HorizontalOptions="StartAndExpand">
                                        <Label Text="SENT" FontFamily="{StaticResource SemiBoldFont}" FontSize="10" TextColor="#787878"/>
                                        <Label Text="{Binding SendTimeString, Mode=OneWay}" FontFamily="{StaticResource SemiBoldFont}" FontSize="12" TextColor="Black"/>
                                    </StackLayout>
                                    <StackLayout Spacing="0" HorizontalOptions="EndAndExpand">
                                        <Label Text="DEADLINE" FontFamily="{StaticResource SemiBoldFont}" FontSize="10" TextColor="#787878" XAlign="End"/>
                                        <Label Text="{Binding DeadlineString, Mode=OneWay}" FontFamily="{StaticResource SemiBoldFont}" FontSize="12" TextColor="Black" XAlign="End"/>
                                    </StackLayout>
                                </StackLayout>
                                <StackLayout Spacing="20"
                                                          RelativeLayout.XConstraint="18" RelativeLayout.YConstraint="115"
             RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=0.9}">
                                    <StackLayout Spacing="5" >
                                        <StackLayout Spacing="0">
                                            <Label TextColor="#5F5F5F" Text="Role" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="10"/>
                                            <Label TextColor="#5F5F5F" Text="Launcher" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="12"/>
                                        </StackLayout>
                                        <BoxView HeightRequest="1" BackgroundColor="#e0e0e0" HorizontalOptions="FillAndExpand" />
                                    </StackLayout>
                                    <Button HorizontalOptions="Center" x:Name="RefundButton" Clicked="RefundClicked" Text="Refund" BorderColor="Transparent" TextColor="White" BackgroundColor="#D43F51" WidthRequest="160" Style="{StaticResource DateButton}"
                                            IsVisible="{Binding DeliveryStatusPrivate,
                                            Converter={StaticResource deliveryStatusToRefundVisibilityConverter},
                                            Mode=OneWay}"/>
                                </StackLayout>
                            </RelativeLayout>
                        </StackLayout>





<local:PaketFrame x:Name="FundInfoViewFrame" BackgroundColor="#FAFAFA" 
                      VerticalOptions="Start"
                      HorizontalOptions="FillAndExpand"
                      Padding="0"
                      CornerRadius="0"
                      HasShadow="false"
                      TopCorners="15">
    <StackLayout x:Name="FundInfoView" Padding="20,20,15,25" BackgroundColor="Transparent" Spacing="15">
        <StackLayout Spacing="15">
            <Label TextColor="Black" Text="FUNDS" XAlign="Start" FontFamily="{StaticResource SemiBoldFont}" FontSize="15"/>
            <StackLayout Spacing="5" >
                <StackLayout Spacing="0">
                    <Label TextColor="#5F5F5F" Text="Collaretal" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="10"/>
                    <Label TextColor="#5F5F5F" Text="{Binding Collateral, StringFormat='{0}.00 BULs', Mode=OneWay}" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="12"/>
                </StackLayout>
                <BoxView HeightRequest="1" BackgroundColor="#e0e0e0" HorizontalOptions="FillAndExpand" />
            </StackLayout>
            <StackLayout Spacing="5" >
                <StackLayout Spacing="0">
                    <Label TextColor="#5F5F5F" Text="Payment" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="10"/>
                    <Label TextColor="#5F5F5F" Text="{Binding Payment, StringFormat='{0}.00 BULs', Mode=OneWay}" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="12"/>
                </StackLayout>
                <BoxView HeightRequest="1" BackgroundColor="#e0e0e0" HorizontalOptions="FillAndExpand" />
            </StackLayout>
        </StackLayout>
    </StackLayout>
</local:PaketFrame>


    <local:PaketFrame x:Name="PaymentInfoViewFrame" BackgroundColor="White" 
                      VerticalOptions="Start"
                      HorizontalOptions="FillAndExpand"
                      Padding="0"
                      CornerRadius="0"
                      HasShadow="false"
                      TopCorners="15">
    <StackLayout x:Name="PaymentInfoView" Padding="20,0,15,5" BackgroundColor="Transparent" Spacing="15">
        <StackLayout Spacing="15">
            <Label TextColor="Black" Text="PAYMENT INFO" XAlign="Start" FontFamily="{StaticResource SemiBoldFont}" FontSize="15"/>
            <StackLayout Spacing="5" >
                <StackLayout Spacing="0" x:Name="BarcodeView" Orientation="Horizontal"  xe:TouchEffect.Color="Gray">
                    <Label TextColor="#5F5F5F" HorizontalOptions="StartAndExpand" Text="Use this barcode to pass the paket to a&#x0a;courier or accept it by the recepient" XAlign="Start" FontFamily="{StaticResource NormalFont}" FontSize="12"/>
                    <Image Source="dropdown_arrow.png" HorizontalOptions="EndAndExpand" VerticalOptions="Center"/>
                 </StackLayout>
                    <zxing:ZXingBarcodeImageView IsVisible="false" x:Name="BarcodeImage" HorizontalOptions="FillAndExpand" HeightRequest="300"/>
            </StackLayout>
        </StackLayout>
    </StackLayout>
</local:PaketFrame>
                        

<local:PaketFrame x:Name="EventsInfoViewFrame" BackgroundColor="#FAFAFA" 
                      VerticalOptions="Start"
                      HorizontalOptions="FillAndExpand"
                      Padding="0"
                      CornerRadius="0"
                      HasShadow="false"
                      TopCorners="15">
    <StackLayout x:Name="EventsInfoView" Padding="20,15,15,25" BackgroundColor="Transparent" Spacing="15">
        <StackLayout Spacing="15">
            <Label TextColor="Black" Text="EVENTS" XAlign="Start" FontFamily="{StaticResource SemiBoldFont}" FontSize="15"/>
            <StackLayout Spacing="5" >
                <StackLayout Spacing="0">
                    <Label TextColor="#5F5F5F" Text="Collaretal" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="10"/>
                    <Label TextColor="#5F5F5F" Text="{Binding Collateral, StringFormat='{0}.00 BULs', Mode=OneWay}" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="12"/>
                </StackLayout>
                <BoxView HeightRequest="1" BackgroundColor="#e0e0e0" HorizontalOptions="FillAndExpand" />
            </StackLayout>
            <StackLayout Spacing="5" >
                <StackLayout Spacing="0">
                    <Label TextColor="#5F5F5F" Text="Payment" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="10"/>
                    <Label TextColor="#5F5F5F" Text="{Binding Payment, StringFormat='{0}.00 BULs', Mode=OneWay}" XAlign="Start" FontFamily="{StaticResource MediumFont}" FontSize="12"/>
                </StackLayout>
                <BoxView HeightRequest="1" BackgroundColor="#e0e0e0" HorizontalOptions="FillAndExpand" />
            </StackLayout>
        </StackLayout>
    </StackLayout>
</local:PaketFrame>





                            
                    </StackLayout>
                        
                   </ScrollView>
                    
                </RelativeLayout>
            </Frame>
        </RelativeLayout>
    </local:BasePage.Content>
</local:BasePage>
